

<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–ú–∏–≥—Ä–∞—Ü–∏—è —Å OpenAI SDK &mdash; Evolution OpenAI 1.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/custom.css?v=95aa0e50" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js?v=af2ce170"></script>
      <script src="_static/doctools.js?v=888ff710"></script>
      <script src="_static/sphinx_highlight.js?v=4825356b"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="–†–∞–±–æ—Ç–∞ —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π" href="README_DOCS.html" />
    <link rel="prev" title="–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫" href="error_handling.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2980B9" >

          
          
          <a href="index.html" class="icon icon-home">
            Evolution OpenAI
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">–£—Å—Ç–∞–Ω–æ–≤–∫–∞</a></li>
<li class="toctree-l1"><a class="reference internal" href="authentication.html">–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage.html">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ</a></li>
<li class="toctree-l1"><a class="reference internal" href="async_usage.html">–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ</a></li>
<li class="toctree-l1"><a class="reference internal" href="streaming.html">Streaming API</a></li>
<li class="toctree-l1"><a class="reference internal" href="error_handling.html">–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">–ú–∏–≥—Ä–∞—Ü–∏—è —Å OpenAI SDK</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id1">–ü–æ—á–µ–º—É –º–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–æ—Å—Ç–∞</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id2">–û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id3">–ü–æ—à–∞–≥–æ–≤–∞—è –º–∏–≥—Ä–∞—Ü–∏—è</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id4">–®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id5">–®–∞–≥ 2: –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–æ–≤</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id6">–®–∞–≥ 3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id7">–®–∞–≥ 4: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id8">–ü—Ä–∏–º–µ—Ä—ã –º–∏–≥—Ä–∞—Ü–∏–∏</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id9">–ë–∞–∑–æ–≤—ã–π —á–∞—Ç</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id10">–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥</a></li>
<li class="toctree-l3"><a class="reference internal" href="#streaming">Streaming</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id11">–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id12">–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∏–≥—Ä–∞—Ü–∏—è</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id13">–°–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id14">–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#docker-compose">Docker Compose</a></li>
<li class="toctree-l3"><a class="reference internal" href="#kubernetes">Kubernetes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id15">–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id16">–ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π —Å–∫—Ä–∏–ø—Ç</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id17">–ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-not-found">–ü—Ä–æ–±–ª–µ–º–∞: ‚ÄúModule not found‚Äù</a></li>
<li class="toctree-l3"><a class="reference internal" href="#invalid-credentials">–ü—Ä–æ–±–ª–µ–º–∞: ‚ÄúInvalid credentials‚Äù</a></li>
<li class="toctree-l3"><a class="reference internal" href="#model-not-found">–ü—Ä–æ–±–ª–µ–º–∞: ‚ÄúModel not found‚Äù</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id18">–ü—Ä–æ–±–ª–µ–º–∞: –°—Ç–∞—Ä—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#rollback">Rollback –ø–ª–∞–Ω</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id19">–ß–µ–∫-–ª–∏—Å—Ç –º–∏–≥—Ä–∞—Ü–∏–∏</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id20">–ó–∞–∫–ª—é—á–µ–Ω–∏–µ</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="README_DOCS.html">–†–∞–±–æ—Ç–∞ —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #2980B9" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Evolution OpenAI</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">–ú–∏–≥—Ä–∞—Ü–∏—è —Å OpenAI SDK</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/cloud-ru-tech/evolution-openai-python/blob/main/docs/migration.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="openai-sdk">
<h1>–ú–∏–≥—Ä–∞—Ü–∏—è —Å OpenAI SDK<a class="headerlink" href="#openai-sdk" title="Permalink to this heading">ÔÉÅ</a></h1>
<p>–≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ OpenAI Python SDK –Ω–∞ Evolution OpenAI.</p>
<section id="id1">
<h2>–ü–æ—á–µ–º—É –º–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–æ—Å—Ç–∞<a class="headerlink" href="#id1" title="Permalink to this heading">ÔÉÅ</a></h2>
<p>Evolution OpenAI <strong>–ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–º–µ—Å—Ç–∏–º</strong> —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º OpenAI SDK:</p>
<p>‚úÖ <strong>–ò–¥–µ–Ω—Ç–∏—á–Ω—ã–π API</strong> - –≤—Å–µ –º–µ—Ç–æ–¥—ã –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ
‚úÖ <strong>–¢–µ –∂–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö</strong> - —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –æ—Ç–≤–µ—Ç–æ–≤ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å
‚úÖ <strong>–°–æ–≤–º–µ—Å—Ç–∏–º—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è</strong> - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞
‚úÖ <strong>Async/await –ø–æ–¥–¥–µ—Ä–∂–∫–∞</strong> - –≤—Å–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
‚úÖ <strong>Streaming API</strong> - –ø–æ—Ç–æ–∫–æ–≤–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–¥–µ–Ω—Ç–∏—á–Ω–æ</p>
</section>
<section id="id2">
<h2>–û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è<a class="headerlink" href="#id2" title="Permalink to this heading">ÔÉÅ</a></h2>
<p>–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –æ—Ç–ª–∏—á–∏–µ - <strong>—Å–ø–æ—Å–æ–± –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏</strong>:</p>
<table class="docutils align-default" id="id21">
<caption><span class="caption-text">–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏</span><a class="headerlink" href="#id21" title="Permalink to this table">ÔÉÅ</a></caption>
<colgroup>
<col style="width: 50.0%" />
<col style="width: 50.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>OpenAI SDK</p></th>
<th class="head"><p>Evolution OpenAI</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">api_key=&quot;sk-...&quot;</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">key_id=&quot;your_key_id&quot;,</span> <span class="pre">secret=&quot;your_secret&quot;</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">base_url</span></code> (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">base_url</span></code> (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">organization</span></code> (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">organization</span></code> (—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å)</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id3">
<h2>–ü–æ—à–∞–≥–æ–≤–∞—è –º–∏–≥—Ä–∞—Ü–∏—è<a class="headerlink" href="#id3" title="Permalink to this heading">ÔÉÅ</a></h2>
<section id="id4">
<h3>–®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞<a class="headerlink" href="#id4" title="Permalink to this heading">ÔÉÅ</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># –£–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—ã–π SDK (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)</span>
pip<span class="w"> </span>uninstall<span class="w"> </span>openai

<span class="c1"># –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Evolution SDK</span>
pip<span class="w"> </span>install<span class="w"> </span>evolution-openai
</pre></div>
</div>
</section>
<section id="id5">
<h3>–®–∞–≥ 2: –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∏–º–ø–æ—Ä—Ç–æ–≤<a class="headerlink" href="#id5" title="Permalink to this heading">ÔÉÅ</a></h3>
<p><strong>–î–æ:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">openai</span><span class="w"> </span><span class="kn">import</span> <span class="n">OpenAI</span><span class="p">,</span> <span class="n">AsyncOpenAI</span>
</pre></div>
</div>
<p><strong>–ü–æ—Å–ª–µ:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">evolution_openai</span><span class="w"> </span><span class="kn">import</span> <span class="n">OpenAI</span><span class="p">,</span> <span class="n">AsyncOpenAI</span>
</pre></div>
</div>
</section>
<section id="id6">
<h3>–®–∞–≥ 3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏<a class="headerlink" href="#id6" title="Permalink to this heading">ÔÉÅ</a></h3>
<p><strong>–î–æ:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">client</span> <span class="o">=</span> <span class="n">OpenAI</span><span class="p">(</span>
    <span class="n">api_key</span><span class="o">=</span><span class="s2">&quot;sk-your-openai-key&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
<p><strong>–ü–æ—Å–ª–µ:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">client</span> <span class="o">=</span> <span class="n">OpenAI</span><span class="p">(</span>
    <span class="n">key_id</span><span class="o">=</span><span class="s2">&quot;your_EVOLUTION_key_id&quot;</span><span class="p">,</span>
    <span class="n">secret</span><span class="o">=</span><span class="s2">&quot;your_EVOLUTION_secret&quot;</span><span class="p">,</span>
    <span class="n">base_url</span><span class="o">=</span><span class="s2">&quot;https://your-endpoint.cloud.ru/v1&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id7">
<h3>–®–∞–≥ 4: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è<a class="headerlink" href="#id7" title="Permalink to this heading">ÔÉÅ</a></h3>
<p><strong>–î–æ:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">OPENAI_API_KEY</span><span class="o">=</span><span class="s2">&quot;sk-your-key&quot;</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">OPENAI_BASE_URL</span><span class="o">=</span><span class="s2">&quot;https://api.openai.com/v1&quot;</span><span class="w">  </span><span class="c1"># –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ</span>
</pre></div>
</div>
<p><strong>–ü–æ—Å–ª–µ:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">EVOLUTION_KEY_ID</span><span class="o">=</span><span class="s2">&quot;your_key_id&quot;</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">EVOLUTION_SECRET</span><span class="o">=</span><span class="s2">&quot;your_secret&quot;</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">EVOLUTION_BASE_URL</span><span class="o">=</span><span class="s2">&quot;https://your-endpoint.cloud.ru/v1&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="id8">
<h2>–ü—Ä–∏–º–µ—Ä—ã –º–∏–≥—Ä–∞—Ü–∏–∏<a class="headerlink" href="#id8" title="Permalink to this heading">ÔÉÅ</a></h2>
<section id="id9">
<h3>–ë–∞–∑–æ–≤—ã–π —á–∞—Ç<a class="headerlink" href="#id9" title="Permalink to this heading">ÔÉÅ</a></h3>
<p><strong>–î–æ (OpenAI):</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">openai</span><span class="w"> </span><span class="kn">import</span> <span class="n">OpenAI</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">OpenAI</span><span class="p">(</span>
    <span class="n">api_key</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;OPENAI_API_KEY&quot;</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">completions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-3.5-turbo&quot;</span><span class="p">,</span>
    <span class="n">messages</span><span class="o">=</span><span class="p">[</span>
        <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;You are a helpful assistant.&quot;</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello!&quot;</span><span class="p">}</span>
    <span class="p">],</span>
    <span class="n">max_tokens</span><span class="o">=</span><span class="mi">100</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>–ü–æ—Å–ª–µ (Evolution):</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">evolution_openai</span><span class="w"> </span><span class="kn">import</span> <span class="n">OpenAI</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">OpenAI</span><span class="p">(</span>
    <span class="n">key_id</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;EVOLUTION_KEY_ID&quot;</span><span class="p">),</span>
    <span class="n">secret</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;EVOLUTION_SECRET&quot;</span><span class="p">),</span>
    <span class="n">base_url</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;EVOLUTION_BASE_URL&quot;</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">completions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;default&quot;</span><span class="p">,</span>  <span class="c1"># –ò–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –≤–∞—à–µ–π –º–æ–¥–µ–ª–∏</span>
    <span class="n">messages</span><span class="o">=</span><span class="p">[</span>
        <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;system&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;You are a helpful assistant.&quot;</span><span class="p">},</span>
        <span class="p">{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello!&quot;</span><span class="p">}</span>
    <span class="p">],</span>
    <span class="n">max_tokens</span><span class="o">=</span><span class="mi">100</span>
<span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id10">
<h3>–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥<a class="headerlink" href="#id10" title="Permalink to this heading">ÔÉÅ</a></h3>
<p><strong>–î–æ (OpenAI):</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">openai</span><span class="w"> </span><span class="kn">import</span> <span class="n">AsyncOpenAI</span>

<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">client</span> <span class="o">=</span> <span class="n">AsyncOpenAI</span><span class="p">(</span>
        <span class="n">api_key</span><span class="o">=</span><span class="s2">&quot;sk-your-key&quot;</span>
    <span class="p">)</span>

    <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">completions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
        <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-3.5-turbo&quot;</span><span class="p">,</span>
        <span class="n">messages</span><span class="o">=</span><span class="p">[{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello async!&quot;</span><span class="p">}]</span>
    <span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</pre></div>
</div>
<p><strong>–ü–æ—Å–ª–µ (Evolution):</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">asyncio</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">evolution_openai</span><span class="w"> </span><span class="kn">import</span> <span class="n">AsyncOpenAI</span>

<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="k">async</span> <span class="k">with</span> <span class="n">AsyncOpenAI</span><span class="p">(</span>
        <span class="n">key_id</span><span class="o">=</span><span class="s2">&quot;your_key_id&quot;</span><span class="p">,</span>
        <span class="n">secret</span><span class="o">=</span><span class="s2">&quot;your_secret&quot;</span><span class="p">,</span>
        <span class="n">base_url</span><span class="o">=</span><span class="s2">&quot;https://your-endpoint.cloud.ru/v1&quot;</span>
    <span class="p">)</span> <span class="k">as</span> <span class="n">client</span><span class="p">:</span>

        <span class="n">response</span> <span class="o">=</span> <span class="k">await</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">completions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
            <span class="n">model</span><span class="o">=</span><span class="s2">&quot;default&quot;</span><span class="p">,</span>
            <span class="n">messages</span><span class="o">=</span><span class="p">[{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello async!&quot;</span><span class="p">}]</span>
        <span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>

<span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</pre></div>
</div>
</section>
<section id="streaming">
<h3>Streaming<a class="headerlink" href="#streaming" title="Permalink to this heading">ÔÉÅ</a></h3>
<p><strong>–î–æ (OpenAI):</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">openai</span><span class="w"> </span><span class="kn">import</span> <span class="n">OpenAI</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">OpenAI</span><span class="p">(</span><span class="n">api_key</span><span class="o">=</span><span class="s2">&quot;sk-your-key&quot;</span><span class="p">)</span>

<span class="n">stream</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">completions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;gpt-3.5-turbo&quot;</span><span class="p">,</span>
    <span class="n">messages</span><span class="o">=</span><span class="p">[{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Tell me a story&quot;</span><span class="p">}],</span>
    <span class="n">stream</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>

<span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">stream</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">chunk</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">delta</span><span class="o">.</span><span class="n">content</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">chunk</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">delta</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>–ü–æ—Å–ª–µ (Evolution):</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">evolution_openai</span><span class="w"> </span><span class="kn">import</span> <span class="n">OpenAI</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">OpenAI</span><span class="p">(</span>
    <span class="n">key_id</span><span class="o">=</span><span class="s2">&quot;your_key_id&quot;</span><span class="p">,</span>
    <span class="n">secret</span><span class="o">=</span><span class="s2">&quot;your_secret&quot;</span><span class="p">,</span>
    <span class="n">base_url</span><span class="o">=</span><span class="s2">&quot;https://your-endpoint.cloud.ru/v1&quot;</span>
<span class="p">)</span>

<span class="n">stream</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">completions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;default&quot;</span><span class="p">,</span>
    <span class="n">messages</span><span class="o">=</span><span class="p">[{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Tell me a story&quot;</span><span class="p">}],</span>
    <span class="n">stream</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>

<span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">stream</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">chunk</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">delta</span><span class="o">.</span><span class="n">content</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">chunk</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">delta</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id11">
<h3>–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫<a class="headerlink" href="#id11" title="Permalink to this heading">ÔÉÅ</a></h3>
<p><strong>–î–æ (OpenAI):</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">openai</span><span class="w"> </span><span class="kn">import</span> <span class="n">OpenAI</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">openai.error</span><span class="w"> </span><span class="kn">import</span> <span class="n">OpenAIError</span><span class="p">,</span> <span class="n">RateLimitError</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">completions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="k">except</span> <span class="n">RateLimitError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Rate limit exceeded: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="n">OpenAIError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;OpenAI error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>–ü–æ—Å–ª–µ (Evolution):</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">evolution_openai</span><span class="w"> </span><span class="kn">import</span> <span class="n">OpenAI</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">evolution_openai.exceptions</span><span class="w"> </span><span class="kn">import</span> <span class="n">EvolutionOpenAIError</span><span class="p">,</span> <span class="n">RateLimitError</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">completions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="k">except</span> <span class="n">RateLimitError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Rate limit exceeded: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="k">except</span> <span class="n">EvolutionOpenAIError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Evolution error: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="id12">
<h2>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∏–≥—Ä–∞—Ü–∏—è<a class="headerlink" href="#id12" title="Permalink to this heading">ÔÉÅ</a></h2>
<section id="id13">
<h3>–°–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏<a class="headerlink" href="#id13" title="Permalink to this heading">ÔÉÅ</a></h3>
<p>–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª <code class="docutils literal notranslate"><span class="pre">migrate.py</span></code> –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∑–∞–º–µ–Ω—ã:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python3</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">–°–∫—Ä–∏–ø—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏ —Å OpenAI SDK –Ω–∞ Evolution OpenAI</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">re</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">argparse</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>

<span class="k">def</span><span class="w"> </span><span class="nf">migrate_file</span><span class="p">(</span><span class="n">file_path</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;–ú–∏–≥—Ä–∏—Ä—É–µ—Ç –æ–¥–∏–Ω Python —Ñ–∞–π–ª&quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">content</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

    <span class="n">original_content</span> <span class="o">=</span> <span class="n">content</span>

    <span class="c1"># –ó–∞–º–µ–Ω–∞ –∏–º–ø–æ—Ä—Ç–æ–≤</span>
    <span class="n">content</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span>
        <span class="sa">r</span><span class="s1">&#39;from openai import&#39;</span><span class="p">,</span>
        <span class="sa">r</span><span class="s1">&#39;from evolution_openai import&#39;</span><span class="p">,</span>
        <span class="n">content</span>
    <span class="p">)</span>

    <span class="n">content</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span>
        <span class="sa">r</span><span class="s1">&#39;import openai&#39;</span><span class="p">,</span>
        <span class="sa">r</span><span class="s1">&#39;import evolution_openai as openai&#39;</span><span class="p">,</span>
        <span class="n">content</span>
    <span class="p">)</span>

    <span class="c1"># –ó–∞–º–µ–Ω–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–∞</span>
    <span class="n">content</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span>
        <span class="sa">r</span><span class="s1">&#39;OpenAI\(\s*api_key\s*=\s*[&quot;</span><span class="se">\&#39;</span><span class="s1">]([^&quot;</span><span class="se">\&#39;</span><span class="s1">]+)[&quot;</span><span class="se">\&#39;</span><span class="s1">]\s*\)&#39;</span><span class="p">,</span>
        <span class="sa">r</span><span class="s1">&#39;OpenAI(\n    key_id=&quot;your_key_id&quot;,\n    secret=&quot;your_secret&quot;,\n    base_url=&quot;https://your-endpoint.cloud.ru/v1&quot;\n)&#39;</span><span class="p">,</span>
        <span class="n">content</span>
    <span class="p">)</span>

    <span class="c1"># –ó–∞–º–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è</span>
    <span class="n">content</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span>
        <span class="sa">r</span><span class="s1">&#39;os\.getenv\([&quot;</span><span class="se">\&#39;</span><span class="s1">]OPENAI_API_KEY[&quot;</span><span class="se">\&#39;</span><span class="s1">]\)&#39;</span><span class="p">,</span>
        <span class="sa">r</span><span class="s1">&#39;os.getenv(&quot;EVOLUTION_KEY_ID&quot;)&#39;</span><span class="p">,</span>
        <span class="n">content</span>
    <span class="p">)</span>

    <span class="c1"># –ó–∞–º–µ–Ω–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π</span>
    <span class="n">content</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span>
        <span class="sa">r</span><span class="s1">&#39;from openai\.error import&#39;</span><span class="p">,</span>
        <span class="sa">r</span><span class="s1">&#39;from evolution_openai.exceptions import&#39;</span><span class="p">,</span>
        <span class="n">content</span>
    <span class="p">)</span>

    <span class="n">content</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span>
        <span class="sa">r</span><span class="s1">&#39;OpenAIError&#39;</span><span class="p">,</span>
        <span class="sa">r</span><span class="s1">&#39;EvolutionOpenAIError&#39;</span><span class="p">,</span>
        <span class="n">content</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">content</span> <span class="o">!=</span> <span class="n">original_content</span><span class="p">:</span>
        <span class="c1"># –°–æ–∑–¥–∞–µ–º —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é</span>
        <span class="n">backup_path</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">.backup&quot;</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">backup_path</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">original_content</span><span class="p">)</span>

        <span class="c1"># –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–Ω—ã–π —Ñ–∞–π–ª</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚úÖ –ú–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω: </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2"> (—Ä–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è: </span><span class="si">{</span><span class="n">backup_path</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚è≠Ô∏è –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π: </span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>

<span class="k">def</span><span class="w"> </span><span class="nf">migrate_directory</span><span class="p">(</span><span class="n">directory</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;–ú–∏–≥—Ä–∏—Ä—É–µ—Ç –≤—Å–µ Python —Ñ–∞–π–ª—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏&quot;&quot;&quot;</span>
    <span class="n">directory</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span>
    <span class="n">migrated_count</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">for</span> <span class="n">py_file</span> <span class="ow">in</span> <span class="n">directory</span><span class="o">.</span><span class="n">rglob</span><span class="p">(</span><span class="s2">&quot;*.py&quot;</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">migrate_file</span><span class="p">(</span><span class="n">py_file</span><span class="p">):</span>
            <span class="n">migrated_count</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">üìä –ú–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ —Ñ–∞–π–ª–æ–≤: </span><span class="si">{</span><span class="n">migrated_count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">create_env_template</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;–°–æ–∑–¥–∞–µ—Ç —à–∞–±–ª–æ–Ω .env —Ñ–∞–π–ª–∞&quot;&quot;&quot;</span>
    <span class="n">env_content</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;# Evolution OpenAI Configuration</span>
<span class="s2">EVOLUTION_KEY_ID=your_key_id_here</span>
<span class="s2">EVOLUTION_SECRET=your_secret_here</span>
<span class="s2">EVOLUTION_BASE_URL=https://your-endpoint.cloud.ru/v1</span>

<span class="s2"># Legacy OpenAI (—É–¥–∞–ª–∏—Ç–µ –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏)</span>
<span class="s2"># OPENAI_API_KEY=sk-...</span>
<span class="s2">&quot;&quot;&quot;</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;.env.Evolution&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">env_content</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;üìÑ –°–æ–∑–¥–∞–Ω —à–∞–±–ª–æ–Ω .env.Evolution&quot;</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">argparse</span><span class="o">.</span><span class="n">ArgumentParser</span><span class="p">(</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;–ú–∏–≥—Ä–∞—Ü–∏—è —Å OpenAI SDK –Ω–∞ Evolution OpenAI&quot;</span>
    <span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s1">&#39;path&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;–ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –∏–ª–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏&quot;</span>
    <span class="p">)</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">add_argument</span><span class="p">(</span>
        <span class="s1">&#39;--env&#39;</span><span class="p">,</span>
        <span class="n">action</span><span class="o">=</span><span class="s1">&#39;store_true&#39;</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;–°–æ–∑–¥–∞—Ç—å —à–∞–±–ª–æ–Ω .env —Ñ–∞–π–ª–∞&quot;</span>
    <span class="p">)</span>

    <span class="n">args</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">parse_args</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">args</span><span class="o">.</span><span class="n">env</span><span class="p">:</span>
        <span class="n">create_env_template</span><span class="p">()</span>

    <span class="n">path</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">is_file</span><span class="p">()</span> <span class="ow">and</span> <span class="n">path</span><span class="o">.</span><span class="n">suffix</span> <span class="o">==</span> <span class="s1">&#39;.py&#39;</span><span class="p">:</span>
        <span class="n">migrate_file</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">path</span><span class="o">.</span><span class="n">is_dir</span><span class="p">():</span>
        <span class="n">migrate_directory</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ùå –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –ø—É—Ç—å: </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<p>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –æ–¥–∏–Ω —Ñ–∞–π–ª</span>
python<span class="w"> </span>migrate.py<span class="w"> </span>my_app.py

<span class="c1"># –ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤—Å—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é</span>
python<span class="w"> </span>migrate.py<span class="w"> </span>./src

<span class="c1"># –°–æ–∑–¥–∞—Ç—å —à–∞–±–ª–æ–Ω .env</span>
python<span class="w"> </span>migrate.py<span class="w"> </span>--env<span class="w"> </span>.
</pre></div>
</div>
</section>
</section>
<section id="id14">
<h2>–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã<a class="headerlink" href="#id14" title="Permalink to this heading">ÔÉÅ</a></h2>
<section id="docker-compose">
<h3>Docker Compose<a class="headerlink" href="#docker-compose" title="Permalink to this heading">ÔÉÅ</a></h3>
<p><strong>–î–æ:</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;3.8&#39;</span>
<span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">app</span><span class="p">:</span>
<span class="w">    </span><span class="nt">build</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">.</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">OPENAI_API_KEY=sk-your-key</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">OPENAI_BASE_URL=https://api.openai.com/v1</span>
</pre></div>
</div>
<p><strong>–ü–æ—Å–ª–µ:</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">version</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;3.8&#39;</span>
<span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">app</span><span class="p">:</span>
<span class="w">    </span><span class="nt">build</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">.</span>
<span class="w">    </span><span class="nt">environment</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EVOLUTION_KEY_ID=your_key_id</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EVOLUTION_SECRET=your_secret</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EVOLUTION_BASE_URL=https://your-endpoint.cloud.ru/v1</span>
</pre></div>
</div>
</section>
<section id="kubernetes">
<h3>Kubernetes<a class="headerlink" href="#kubernetes" title="Permalink to this heading">ÔÉÅ</a></h3>
<p><strong>–î–æ:</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">openai-config</span>
<span class="nt">data</span><span class="p">:</span>
<span class="w">  </span><span class="nt">OPENAI_API_KEY</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;sk-your-key&quot;</span>
</pre></div>
</div>
<p><strong>–ü–æ—Å–ª–µ:</strong></p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ConfigMap</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Evolution-config</span>
<span class="nt">data</span><span class="p">:</span>
<span class="w">  </span><span class="nt">EVOLUTION_KEY_ID</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your_key_id&quot;</span>
<span class="w">  </span><span class="nt">EVOLUTION_SECRET</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;your_secret&quot;</span>
<span class="w">  </span><span class="nt">EVOLUTION_BASE_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://your-endpoint.cloud.ru/v1&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="id15">
<h2>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏<a class="headerlink" href="#id15" title="Permalink to this heading">ÔÉÅ</a></h2>
<section id="id16">
<h3>–ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π —Å–∫—Ä–∏–ø—Ç<a class="headerlink" href="#id16" title="Permalink to this heading">ÔÉÅ</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python3</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ Evolution OpenAI</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">evolution_openai</span><span class="w"> </span><span class="kn">import</span> <span class="n">OpenAI</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_connection</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;–¢–µ—Å—Ç–∏—Ä—É–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ Evolution API&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">client</span> <span class="o">=</span> <span class="n">OpenAI</span><span class="p">(</span>
            <span class="n">key_id</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;EVOLUTION_KEY_ID&quot;</span><span class="p">),</span>
            <span class="n">secret</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;EVOLUTION_SECRET&quot;</span><span class="p">),</span>
            <span class="n">base_url</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;EVOLUTION_BASE_URL&quot;</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">completions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
            <span class="n">model</span><span class="o">=</span><span class="s2">&quot;default&quot;</span><span class="p">,</span>
            <span class="n">messages</span><span class="o">=</span><span class="p">[{</span><span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="s2">&quot;Test connection&quot;</span><span class="p">}],</span>
            <span class="n">max_tokens</span><span class="o">=</span><span class="mi">10</span>
        <span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ!&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;–û—Ç–≤–µ—Ç: </span><span class="si">{</span><span class="n">response</span><span class="o">.</span><span class="n">choices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">content</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ùå –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_models</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;–¢–µ—Å—Ç–∏—Ä—É–µ—Ç –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –º–æ–¥–µ–ª–µ–π&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">client</span> <span class="o">=</span> <span class="n">OpenAI</span><span class="p">(</span>
            <span class="n">key_id</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;EVOLUTION_KEY_ID&quot;</span><span class="p">),</span>
            <span class="n">secret</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;EVOLUTION_SECRET&quot;</span><span class="p">),</span>
            <span class="n">base_url</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="s2">&quot;EVOLUTION_BASE_URL&quot;</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="n">models</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">models</span><span class="o">.</span><span class="n">list</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚úÖ –î–æ—Å—Ç—É–ø–Ω—ã–µ –º–æ–¥–µ–ª–∏: </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">data</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">model</span> <span class="ow">in</span> <span class="n">models</span><span class="o">.</span><span class="n">data</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;  - </span><span class="si">{</span><span class="n">model</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ùå –û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –º–æ–¥–µ–ª–µ–π: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>

<span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Evolution OpenAI&quot;</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=&quot;</span> <span class="o">*</span> <span class="mi">40</span><span class="p">)</span>

    <span class="c1"># –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è</span>
    <span class="n">required_vars</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;EVOLUTION_KEY_ID&quot;</span><span class="p">,</span> <span class="s2">&quot;EVOLUTION_SECRET&quot;</span><span class="p">,</span> <span class="s2">&quot;EVOLUTION_BASE_URL&quot;</span><span class="p">]</span>
    <span class="n">missing_vars</span> <span class="o">=</span> <span class="p">[</span><span class="n">var</span> <span class="k">for</span> <span class="n">var</span> <span class="ow">in</span> <span class="n">required_vars</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">getenv</span><span class="p">(</span><span class="n">var</span><span class="p">)]</span>

    <span class="k">if</span> <span class="n">missing_vars</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">missing_vars</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">False</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;‚úÖ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã&quot;</span><span class="p">)</span>

    <span class="c1"># –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</span>
    <span class="n">success</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">success</span> <span class="o">&amp;=</span> <span class="n">test_connection</span><span class="p">()</span>
    <span class="n">success</span> <span class="o">&amp;=</span> <span class="n">test_models</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">success</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">üéâ –ú–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">‚ùå –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã –≤ –º–∏–≥—Ä–∞—Ü–∏–∏&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">success</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">exit</span><span class="p">(</span><span class="mi">0</span> <span class="k">if</span> <span class="n">main</span><span class="p">()</span> <span class="k">else</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="id17">
<h2>–ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è<a class="headerlink" href="#id17" title="Permalink to this heading">ÔÉÅ</a></h2>
<section id="module-not-found">
<h3>–ü—Ä–æ–±–ª–µ–º–∞: ‚ÄúModule not found‚Äù<a class="headerlink" href="#module-not-found" title="Permalink to this heading">ÔÉÅ</a></h3>
<p><strong>–û—à–∏–±–∫–∞:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ne">ModuleNotFoundError</span><span class="p">:</span> <span class="n">No</span> <span class="n">module</span> <span class="n">named</span> <span class="s1">&#39;openai&#39;</span>
</pre></div>
</div>
<p><strong>–†–µ—à–µ–Ω–∏–µ:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># –ó–∞–º–µ–Ω–∏—Ç–µ –≤—Å–µ –∏–º–ø–æ—Ä—Ç—ã</span>
<span class="c1"># from openai import OpenAI</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">evolution_openai</span><span class="w"> </span><span class="kn">import</span> <span class="n">OpenAI</span>
</pre></div>
</div>
</section>
<section id="invalid-credentials">
<h3>–ü—Ä–æ–±–ª–µ–º–∞: ‚ÄúInvalid credentials‚Äù<a class="headerlink" href="#invalid-credentials" title="Permalink to this heading">ÔÉÅ</a></h3>
<p><strong>–û—à–∏–±–∫–∞:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">AuthenticationError</span><span class="p">:</span> <span class="n">Invalid</span> <span class="n">credentials</span>
</pre></div>
</div>
<p><strong>–†–µ—à–µ–Ω–∏–µ:</strong></p>
<ol class="arabic simple">
<li><p>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å <code class="docutils literal notranslate"><span class="pre">key_id</span></code> –∏ <code class="docutils literal notranslate"><span class="pre">secret</span></code></p></li>
<li><p>–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ <code class="docutils literal notranslate"><span class="pre">base_url</span></code> –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω</p></li>
<li><p>–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫–ª—é—á–∞</p></li>
</ol>
</section>
<section id="model-not-found">
<h3>–ü—Ä–æ–±–ª–µ–º–∞: ‚ÄúModel not found‚Äù<a class="headerlink" href="#model-not-found" title="Permalink to this heading">ÔÉÅ</a></h3>
<p><strong>–û—à–∏–±–∫–∞:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">NotFoundError</span><span class="p">:</span> <span class="n">Model</span> <span class="s1">&#39;gpt-3.5-turbo&#39;</span> <span class="ow">not</span> <span class="n">found</span>
</pre></div>
</div>
<p><strong>–†–µ—à–µ–Ω–∏–µ:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ –Ω–∞ –¥–æ—Å—Ç—É–ø–Ω–æ–µ</span>
<span class="n">response</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">chat</span><span class="o">.</span><span class="n">completions</span><span class="o">.</span><span class="n">create</span><span class="p">(</span>
    <span class="n">model</span><span class="o">=</span><span class="s2">&quot;default&quot;</span><span class="p">,</span>  <span class="c1"># –ò–ª–∏ –¥—Ä—É–≥–æ–µ –¥–æ—Å—Ç—É–ø–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ</span>
    <span class="n">messages</span><span class="o">=</span><span class="p">[</span><span class="o">...</span><span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id18">
<h3>–ü—Ä–æ–±–ª–µ–º–∞: –°—Ç–∞—Ä—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è<a class="headerlink" href="#id18" title="Permalink to this heading">ÔÉÅ</a></h3>
<p><strong>–û—à–∏–±–∫–∞:</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ne">NameError</span><span class="p">:</span> <span class="n">name</span> <span class="s1">&#39;OpenAIError&#39;</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">defined</span>
</pre></div>
</div>
<p><strong>–†–µ—à–µ–Ω–∏–µ:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># –ó–∞–º–µ–Ω–∏—Ç–µ –∏–º–ø–æ—Ä—Ç—ã –∏—Å–∫–ª—é—á–µ–Ω–∏–π</span>
<span class="c1"># from openai.error import OpenAIError</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">evolution_openai.exceptions</span><span class="w"> </span><span class="kn">import</span> <span class="n">EvolutionOpenAIError</span>
</pre></div>
</div>
</section>
</section>
<section id="rollback">
<h2>Rollback –ø–ª–∞–Ω<a class="headerlink" href="#rollback" title="Permalink to this heading">ÔÉÅ</a></h2>
<p>–ï—Å–ª–∏ –º–∏–≥—Ä–∞—Ü–∏—è –≤—ã–∑–≤–∞–ª–∞ –ø—Ä–æ–±–ª–µ–º—ã, –º–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># 1. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π</span>
find<span class="w"> </span>.<span class="w"> </span>-name<span class="w"> </span><span class="s2">&quot;*.py.backup&quot;</span><span class="w"> </span>-exec<span class="w"> </span>bash<span class="w"> </span>-c<span class="w"> </span><span class="s1">&#39;mv &quot;$1&quot; &quot;${1%.backup}&quot;&#39;</span><span class="w"> </span>_<span class="w"> </span><span class="o">{}</span><span class="w"> </span><span class="se">\;</span>

<span class="c1"># 2. –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π SDK</span>
pip<span class="w"> </span>uninstall<span class="w"> </span>evolution-openai
pip<span class="w"> </span>install<span class="w"> </span>openai

<span class="c1"># 3. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">OPENAI_API_KEY</span><span class="o">=</span><span class="s2">&quot;sk-your-original-key&quot;</span>
</pre></div>
</div>
</section>
<section id="id19">
<h2>–ß–µ–∫-–ª–∏—Å—Ç –º–∏–≥—Ä–∞—Ü–∏–∏<a class="headerlink" href="#id19" title="Permalink to this heading">ÔÉÅ</a></h2>
<table class="docutils align-default" id="id22">
<caption><span class="caption-text">–ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏</span><a class="headerlink" href="#id22" title="Permalink to this table">ÔÉÅ</a></caption>
<colgroup>
<col style="width: 70.0%" />
<col style="width: 30.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>–ó–∞–¥–∞—á–∞</p></th>
<th class="head"><p>–°—Ç–∞—Ç—É—Å</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>‚òê –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω <code class="docutils literal notranslate"><span class="pre">evolution-openai</span></code></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>‚òê –û–±–Ω–æ–≤–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã –≤–æ –≤—Å–µ—Ö —Ñ–∞–π–ª–∞—Ö</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>‚òê –ò–∑–º–µ–Ω–µ–Ω–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>‚òê –û–±–Ω–æ–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>‚òê –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞–∑–≤–∞–Ω–∏—è –º–æ–¥–µ–ª–µ–π</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>‚òê –û–±–Ω–æ–≤–ª–µ–Ω—ã –∏—Å–∫–ª—é—á–µ–Ω–∏—è</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>‚òê –û–±–Ω–æ–≤–ª–µ–Ω—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>‚òê –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>‚òê –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>‚òê –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞</p></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="id20">
<h2>–ó–∞–∫–ª—é—á–µ–Ω–∏–µ<a class="headerlink" href="#id20" title="Permalink to this heading">ÔÉÅ</a></h2>
<p>–ú–∏–≥—Ä–∞—Ü–∏—è —Å OpenAI SDK –Ω–∞ Evolution OpenAI - —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ–π –ø—Ä–æ—Ü–µ—Å—Å, –∫–æ—Ç–æ—Ä—ã–π —Ç—Ä–µ–±—É–µ—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–¥–µ. –û—Å–Ω–æ–≤–Ω–æ–µ –æ—Ç–ª–∏—á–∏–µ - –≤ —Å–ø–æ—Å–æ–±–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏, –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω–æ–µ –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–µ–∏–∑–º–µ–Ω–Ω—ã–º.</p>
<p><strong>–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏:</strong></p>
<p>‚úÖ –î–æ—Å—Ç—É–ø –∫ –º–æ–¥–µ–ª—è–º –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ Cloud.ru
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞–º–∏
‚úÖ –¢–æ—Ç –∂–µ —É–¥–æ–±–Ω—ã–π API
‚úÖ –ü–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º
‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="error_handling.html" class="btn btn-neutral float-left" title="–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="README_DOCS.html" class="btn btn-neutral float-right" title="–†–∞–±–æ—Ç–∞ —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Evolution OpenAI Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>